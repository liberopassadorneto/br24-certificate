import { columns } from './list.columns.js';
import { ALLOWED_ROLES, fetchStoreThemes } from '../utilities/theme-selector/fetch.js';
import { Filter, filterThemes } from '../utilities/theme-selector/filter.js';
import { renderTable } from '@shopify/cli-kit/node/ui';
export async function list(adminSession, options) {
    const store = adminSession.storeFqdn;
    const filter = new Filter({
        ...ALLOWED_ROLES.reduce((roles, role) => {
            roles[role] = options.role === role;
            return roles;
        }, {}),
        theme: options.id?.toString() ?? options.name,
    });
    let storeThemes = await fetchStoreThemes(adminSession);
    if (filter.any()) {
        storeThemes = filterThemes(store, storeThemes, filter);
    }
    const themes = storeThemes.map(({ id, name, role }) => ({
        id: `#${id}`,
        name,
        role: role ? `[${role}]` : '',
    }));
    renderTable({ rows: themes, columns });
}
//# sourceMappingURL=list.js.map